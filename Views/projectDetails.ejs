<html lang="en">
    <%- include("./partials/head.ejs") %>
<body>
    <%- include("./partials/NavigationBars/nav.ejs") %>
    <div style="display: none;" id="form"><%- include ('./Partials/cardForm.ejs') %></div>

    <main class="" id="content">
        <% if (project){ %>
            <header contenteditable="true"><%=projectTitle  %></header>
            <div id="para" contenteditable="true"><%= description %></div>
            <div id="icon-container" class="hidden fixed bottom-0 right-0 mb-2 mr-16 space-y-2">
                <button id="save" class="absolute -left-24 bottom-0">
                    <span class="material-symbols-outlined">save</span>
                </button>
                <button id="delete" class="absolute -top-36 -left-12">
                    <span class="material-symbols-outlined">delete</span>
                </button>
                <button id="pen" class="absolute -top-32 -left-20">
                    <span class="material-symbols-outlined">stylus</span>
                </button>
            </div>

            <h1> > Active To Dos </h1>
            <div class="container" id="c1"></div>
            <h1> > Finished To Dos </h1>
            <div class="container" id="c2"></div>
            <div class="fixed bottom-0 right-0  mb-6 mr-8">
                <button id="opt"><span class="material-symbols-outlined">list</span></button>
            </div>
        <% } else{ %>
            <h1>Project not found</h1>
        <% } %>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const optButton = document.getElementById('opt');
            const iconContainer = document.getElementById('icon-container');
            const saveButton = document.getElementById('save');
            const deleteButton = document.getElementById('delete');
            const penButton = document.getElementById('pen');

            const header = document.querySelector('header');
            const para = document.getElementById('para');

            optButton.addEventListener('click', function() {
                if (iconContainer.style.display === 'none' || iconContainer.style.display === '') {
                    iconContainer.style.display = 'block';
                } else {
                    iconContainer.style.display = 'none';
                }
            });

            saveButton.addEventListener('click', function(){
                const headerValue = headerElement.innerText;
                const paraValue = paraElement.innerText;
            });
            deleteButton.addEventListener('click', function(){
                const userConfirmed = confirm("Are you sure you want to delete this project?");
                if (userConfirmed) {
                    console.log("Project deleted");
                }                
            })
            penButton.addEventListener('click', function(){
                iconContainer.style.display = 'none';
                const form = document.getElementById('form');
                form.style.display = 'block';
                toggleBlurClass(document.querySelector('main'));

            });
            document.getElementById("close").addEventListener('click', function(){
                document.getElementById('form').style.display = 'none';
                document.querySelector('main').classList.remove('blur');});
        });
        function toggleBlurClass(element) {
            const mediaQuery = window.matchMedia('(min-width: 600px)');

            // Check if the screen width is 600px or larger
            if (mediaQuery.matches) {
                element.classList.add('blur'); // Add the blur class
            }
        }
 
    </script>
</body>
</html>